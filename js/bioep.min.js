window.bioEp={bgEl:{},popupEl:{},closeBtnEl:{},shown:!1,overflowDefault:"visible",transformDefault:"",idleTimeoutID:null,width:400,height:220,html:"",css:"",fonts:[],delay:5,showOnDelay:!1,showOnIdle:!1,idleTimeout:10,cookieExp:30,cookieName:"bioep_shown",showOncePerSession:!1,onPopup:null,onClose:null,closeOnBackgroundClick:!1,cookieManager:{create:function(e,t,o,i){var n="";if(i)n="; expires=0";else if(o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3),n="; expires="+s.toGMTString()}document.cookie=e+"="+t+n+"; path=/"},get:function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null},erase:function(e){this.create(e,"",-1)}},checkCookie:function(){return this.cookieExp<=0?!(!this.showOncePerSession||"true"!=this.cookieManager.get(this.cookieName+"_session"))||(this.cookieManager.erase(this.cookieName),!1):"true"==this.cookieManager.get(this.cookieName)},addCSS:function(){for(var e=0;e<this.fonts.length;e++){var t=document.createElement("link");t.href=this.fonts[e],t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)}var o=document.createTextNode("#bio_ep_bg {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; opacity: 0.3; z-index: 10001;}#bio_ep {display: none; position: fixed; width: "+this.width+"px; height: "+this.height+"px; font-size: 16px; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); -webkit-transform: translateX(-50%) translateY(-50%); -ms-transform: translateX(-50%) translateY(-50%); background-color: #fff; box-shadow: 0px 1px 4px 0 rgba(0,0,0,0.5); z-index: 10002;}#bio_ep_close {position: absolute; left: 100%; margin: -8px 0 0 -12px; padding: 2px; box-sizing: border-box; width: 20px; height: 20px; color: #fff; stroke: currentColor; stroke-linecap: round; stroke-width: 5; fill: transparent; border-radius: 50%; background-color: #5c5c5c; cursor: pointer;}#bio_ep_close:hover, #bio_ep_close:active {background-color: #444;}"+this.css),i=document.createElement("style");i.type="text/css",i.appendChild(o),document.head.insertBefore(i,document.head.getElementsByTagName("style")[0])},addPopup:function(){this.bgEl=document.createElement("div"),this.bgEl.id="bio_ep_bg",document.body.appendChild(this.bgEl),document.getElementById("bio_ep")?this.popupEl=document.getElementById("bio_ep"):(this.popupEl=document.createElement("div"),this.popupEl.id="bio_ep",this.popupEl.innerHTML=this.html,document.body.appendChild(this.popupEl)),document.getElementById("bio_ep_close")?this.closeBtnEl=document.getElementById("bio_ep_close"):(this.closeBtnEl=document.createElement("div"),this.closeBtnEl.id="bio_ep_close",this.closeBtnEl.innerHTML='<svg viewbox="0 0 40 40"><path d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg>',this.popupEl.insertBefore(this.closeBtnEl,this.popupEl.firstChild))},showPopup:function(){this.shown||(this.bgEl.style.display="block",this.popupEl.style.display="block",this.shown=!0,this.scalePopup(),this.overflowDefault=document.body.style.overflow,document.body.style.overflow="hidden",this.cookieManager.create(this.cookieName,"true",this.cookieExp,!1),this.cookieManager.create(this.cookieName+"_session","true",0,!0),"function"==typeof this.onPopup&&this.onPopup())},hidePopup:function(){this.bgEl.style.display="none",this.popupEl.style.display="none",document.body.style.overflow=this.overflowDefault,"function"==typeof this.onClose&&this.onClose()},scalePopup:function(){if(this.shown){var e=40,t=40,o=bioEp.popupEl.offsetWidth,i=bioEp.popupEl.offsetHeight,n=window.innerWidth,s=window.innerHeight,h={width:0,height:0},d=o/i;o>n-e&&(h.width=n-e,h.height=h.width/d,h.height>s-t&&(h.height=s-t,h.width=h.height*d)),0===h.height&&i>s-t&&(h.height=s-t,h.width=h.height*d);var l=h.width/o;(l<=0||l>1)&&(l=1),""===this.transformDefault&&(this.transformDefault=window.getComputedStyle(this.popupEl,null).getPropertyValue("transform")),this.popupEl.style.transform=this.transformDefault+" scale("+l+")"}},addEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},removeEvent:function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent&&e.detachEvent("on"+t,o)},loadEvents:function(){this.addEvent(document,"mouseout",function(e){if("input"!=(e=e||window.event).target.tagName.toLowerCase()){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(e.clientX>=t-50||e.clientY>=50)){e.relatedTarget||e.toElement||bioEp.showPopup()}}}.bind(this));var e=function(){this.removeEvent(document,"touchstart",e),this.addEvent(document,"mousemove",o),this.addEvent(document,"mousedown",o),this.addEvent(document,"touchstart",o),this.addEvent(document,"click",o),this.addEvent(document,"scroll",o),this.addEvent(document,"keypress",o),this.addEvent(document,"DOMMouseScroll",o),this.addEvent(document,"mousewheel",o),this.addEvent(document,"touchmove",o),this.addEvent(document,"MSPointerMove",o),t()}.bind(this),t=function(){this.shown||(this.idleTimeoutID=setTimeout(i,1e3*this.idleTimeout))}.bind(this),o=function(){this.shown||(clearTimeout(this.idleTimeoutID),this.idleTimeoutID=null,t())}.bind(this),i=function(){this.removeEvent(document,"mousemove",o),this.removeEvent(document,"mousedown",o),this.removeEvent(document,"touchstart",o),this.removeEvent(document,"click",o),this.removeEvent(document,"scroll",o),this.removeEvent(document,"keypress",o),this.removeEvent(document,"DOMMouseScroll",o),this.removeEvent(document,"mousewheel",o),this.removeEvent(document,"touchmove",o),this.removeEvent(document,"MSPointerMove",o),bioEp.showPopup()}.bind(this);this.addEvent(document,"touchstart",e),this.showOnIdle&&e(),this.addEvent(this.closeBtnEl,"click",function(){bioEp.hidePopup()}),this.closeOnBackgroundClick&&this.addEvent(this.bgEl,"click",function(){bioEp.hidePopup()}),this.addEvent(window,"resize",function(){bioEp.scalePopup()})},setOptions:function(e){this.width=void 0===e.width?this.width:e.width,this.height=void 0===e.height?this.height:e.height,this.html=void 0===e.html?this.html:e.html,this.css=void 0===e.css?this.css:e.css,this.fonts=void 0===e.fonts?this.fonts:e.fonts,this.delay=void 0===e.delay?this.delay:e.delay,this.showOnDelay=void 0===e.showOnDelay?this.showOnDelay:e.showOnDelay,this.showOnIdle=void 0===e.showOnIdle?this.showOnIdle:e.showOnIdle,this.idleTimeout=void 0===e.idleTimeout?this.idleTimeout:e.idleTimeout,this.cookieExp=void 0===e.cookieExp?this.cookieExp:e.cookieExp,this.cookieName=void 0===e.cookieName?this.cookieName:e.cookieName,this.showOncePerSession=void 0===e.showOncePerSession?this.showOncePerSession:e.showOncePerSession,this.onPopup=void 0===e.onPopup?this.onPopup:e.onPopup,this.onClose=void 0===e.onClose?this.onClose:e.onClose,this.closeOnBackgroundClick=void 0===e.closeOnBackgroundClick?this.closeOnBackgroundClick:e.closeOnBackgroundClick},domReady:function(e){"interactive"===document.readyState||"complete"===document.readyState?e():this.addEvent(document,"DOMContentLoaded",e)},init:function(e){void 0!==e&&this.setOptions(e),this.addCSS(),this.domReady(function(){bioEp.checkCookie()||(bioEp.addPopup(),setTimeout(function(){bioEp.loadEvents(),bioEp.showOnDelay&&bioEp.showPopup()},1e3*bioEp.delay))})}};